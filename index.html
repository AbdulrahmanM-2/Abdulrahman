<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hyperwallet Integration Documentation</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --hyperwallet-blue: #00bcd4;
      --hyperwallet-dark: #003c4a;
      --hyperwallet-light: #e0f7fa;
      --hyperwallet-accent: #0097a7;
    }
    body {font-family: 'Inter', Arial, system-ui; background:#f1f5f9; color:#0f172a; margin:0; padding:0;}
    header {background: var(--hyperwallet-blue); color: white; padding: 16px; text-align:center;}
    nav {display:flex; gap:16px; justify-content:center; background: var(--hyperwallet-dark); padding:12px;}
    nav a {color:white; text-decoration:none; font-weight:600;}
    .container {max-width:1000px; margin:0 auto; padding:24px;}
    .card {background:white; padding:24px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.08); margin-bottom:24px;}
    h1,h2,h3,h4 {color: var(--hyperwallet-dark);}
    pre {background: var(--hyperwallet-dark); color:white; padding:16px; border-radius:8px; overflow:auto;}
    code {background: var(--hyperwallet-light); padding:2px 6px; border-radius:6px;}
    ul,ol {line-height:1.7;}
    .diagram {text-align:center; margin:24px 0;}
    footer {text-align:center; color:#475569; padding:16px;}
  </style>
  <script>
    function toggleSection(id) {
      const sec = document.getElementById(id);
      if(sec.style.display === 'none') sec.style.display = 'block';
      else sec.style.display = 'none';
    }
  </script>
</head>
<body> 
<header>
  <h1>Hyperwallet Integration & Encryption Docs</h1>
</header>
<nav>
  <a href="#home" onclick="toggleSection('home')">Home</a>
  <a href="#github" onclick="toggleSection('github')">GitHub Pages</a>
  <a href="#jwks" onclick="toggleSection('jwks')">JWKS Hosting</a>
  <a href="#encryption" onclick="toggleSection('encryption')">Encryption</a>
  <a href="#production" onclick="toggleSection('production')">Production</a>
</nav>
  1<!-- Go to Interactive Version Banner -->
<div class="banner">
  ← You are viewing Legacy documentation. 
  <a href="https://abdulrahmanm-2.github.io/Abdulrahman/enhanced/index.html">Back to Interactive Version</a>
</div>
<div class="container">

<div id="home" class="card">
  <h3>Home</h3>
  <p>Welcome to the Hyperwallet integration documentation website. Navigate using the top menu.</p>
    <p><a href="https://abdulrahmanm-2.github.io/Abdulrahman/jwks.json">Public key choice production</a></p><p>Production public key is hosted to help you get started with payload encryption.You may view JWKS endpoint at URL provided <a href="https://api.paylution.com/jwkset" target="_blank" rel="noopener noreferrer">here.
    </a>Hyperwallet caches your public keys when possible. However, you need to ensure that your public keys are always accessible to avoid service interruption. Hyperwallet supports public/private keys and compact JWT serialization. Hyperwallet doesn't support shared secrets or password-based encryption.</p>
<iframe src="assets/JWKS_FLOW_ASCII_DIAGRAM.txt" width="100%" height="300px"></iframe>
</div>

<div id="github" class="card" style="display:none">
  <h3>GitHub Pages Hosting</h3>
  <ol>
    <li>Create repository on GitHub.</li>
    <li>Add <code>index.html</code>, <code>jwks.json</code>, and assets.</li>
    <li>Enable GitHub Pages in Settings → Pages.</li>
    <li>Publish at <code>https://&lt;username&gt;.github.io/&lt;repo&gt;/</code>.</li>
  </ol>
  <div class="diagram">
    <img src="assets/github_pages_flow.png" alt="GitHub Pages Flow Diagram" width="80%">
  </div>
</div>

<div id="jwks" class="card" style="display:none">
  <h3>JWKS Public Key Hosting</h3>
  <p>Place your JWKS in <code>jwks.json</code> and ensure HTTPS access.</p>
  <pre>{
  "keys": [
    {"kty":"RSA","kid":"prod-key-1","use":"enc","alg":"RSA-OAEP-256","n":"...","e":"AQAB"}
  ]
}</pre>
  <div class="diagram">
    <img src="assets/jwks_flow.png" alt="JWKS Flow Diagram" width="80%">
  </div>
</div>

<div id="encryption" class="card" style="display:none">
  <h3>Payload Encryption</h3>
  <ul>
    <li>RSA-OAEP-256 for CEK encryption</li>
    <li>AES-256-GCM for payload</li>
    <li>JWE Compact Serialization</li>
  </ul>
  <h3>Encryption Flow</h3>
  <div class="diagram">
    <img src="assets/encryption_flow.png" alt="Encryption Flow Diagram" width="80%">
  </div>
  <pre>from jwcrypto import jwk, jwe
from jwcrypto.common import json_encode

with open('jwks.json') as f:
    jwks = json.load(f)
recipient_key = jwk.JWK.from_json(json.dumps(jwks['keys'][0]))

payload = b'{"email":"amohammed@paylution.com"}'
protected = {'alg':'RSA-OAEP-256','enc':'A256GCM','kid':recipient_key.get('kid')}
jwetoken = jwe.JWE(payload, json_encode(protected))
jwetoken.add_recipient(recipient_key)
compact = jwetoken.serialize(compact=True)</pre>
</div>

<div id="production" class="card" style="display:none">
  <h3>Production Access</h3>
  <ol>
    <li>Share JWKS endpoint with Hyperwallet.</li>
    <li>Ensure <code>kid</code> matches encrypted payload header.</li>
    <li>Encrypt requests as JWE.</li>
    <li>Sign requests with your private key if needed.</li>
    <li>Send payloads to <code>https://api.paylution.com/rest/v4</code></li>
  </ol>
  <div class="diagram">
    <img src="assets/production_flow.png" alt="Production Flow Diagram" width="80%">
  </div>
</div>
<h3><b>How Decryption & Signature Verification Works (HS512)</b></h3>

    <div class="section box">
        <h4><b>Header</b></h4>
        <pre>{
  "alg": "HS512",
  "typ": "JWT"
}</pre>
    </div>

    <div class="section box">
        <h4><b>Payload (Data)</b></h4>
        <pre>{
  "token": "usr-78c03528-9916-4856-a92d-bdf79a04d430",
  "status": "PRE_ACTIVATED",
  "verificationStatus": "NOT_REQUIRED",
  "taxVerificationStatus": "NOT_REQUIRED",
  "createdOn": "2025-11-13T16:52:56",
  "clientUserId": "AB67399IP",
  "profileType": "INDIVIDUAL",
  "firstName": "Abdulrahman",
  "lastName": "Mohammed",
  "email": "amohammed@paylution.com",
  "addressLine1": "186 Buza Road",
  "city": "Daressalaam",
  "stateProvince": "DAR",
  "country": "TZ",
  "postalCode": "15115",
  "language": "en",
  "timeZone": "GMT",
  "programToken": "prg-da2bf439-bf8e-4420-89rd-1b53350a2377",
  "links": [
    {
      "params": { "rel": "self" },
      "href": "https://uat-api.paylution.com/rest/v4/users/usr-78c03528-9916-4856-a92d-bdf79a04d430"
    }
  ]
}</pre>

    <div class="section box">
        <h4><b>Verify Signature</b></h4>
        <pre>HMACSHA512(
    base64UrlEncode(header) +
    "." +
    base64UrlEncode(payload),
    base64Decode(your-secret-base64)
)</pre><a href="https://commons.wikimedia.org/wiki/File_talk:File_00000000fa20722f95985c9c9afae047.png#PAYLOAD_ENCRYPTION_SIMPLIFIED_SIGNATURE_VERIFICATION_WORKS_FOR_PRODUCTION_COMPATIBLE_ALGORITHM(RS256)">see the structure available </a>
    </div>
      <h4><b>Decoded Payload</b></h4>
        <img src="assets/decoded_payload.jpg" alt="Decoded Payload Image" width="80%"/>
    </div>
<footer>
  Hyperwallet Integration Documentation &copy; 2025
</footer>
</div>
</body>
</html>
