<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Enhanced API Documentation</title>

<!-- Minified CSS -->
<style>
body{font-family:Arial,sans-serif;background:#f9f9f9;color:#222;line-height:1.6;padding:2rem}h1,h2,h3{color:#003366}pre,code{background:#f1f1f1;padding:.2rem .4rem;border-radius:3px;font-family:monospace}.copy-container{position:relative;margin-bottom:1rem}.copy-container button{position:absolute;top:.2rem;right:.2rem;background:#003366;color:#fff;border:none;padding:.3rem .6rem;border-radius:3px;cursor:pointer}.copy-container button:hover{background:#0055aa}table{border-collapse:collapse;margin:1rem 0;width:100%}th,td{border:1px solid #ccc;padding:.5rem;text-align:left}th{background:#e0e0e0}.banner{background:#003366;color:#fff;padding:1rem;margin-bottom:1.5rem;border-radius:5px;text-align:center;font-weight:bold}.banner a{color:#ffd700;text-decoration:none}
</style>

<!-- Prism.js -->
<link href="https://cdn.jsdelivr.net/npm/prismjs@1.30.0/themes/prism-tomorrow.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.30.0/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.30.0/components/prism-json.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.30.0/components/prism-bash.min.js"></script>

</head>
<body>

<!-- Back to Legacy Version Banner -->
<div class="banner">
  ← You are viewing the enhanced interactive documentation. 
  <a href="../index.html">Back to Legacy Version</a>
</div>

<h1>Enhanced API Documentation</h1>

<section id="overview">
<h2>Overview</h2>
<p>This API follows REST best practices and implements <strong>end-to-end payload security</strong> and <strong>HATEOAS</strong>.</p>
</section>

<section id="security">
<h2>Security Model</h2>
<h3>Transport Security (TLS)</h3>
<p>All endpoints are accessible only over HTTPS.</p>
<h3>Payload Signing (JWS) & Encryption (JWE)</h3>
<pre><code>Client Payload
   ↓
JWS Sign
   ↓
JWE Encrypt
   ↓
HTTPS Transport</code></pre>
</section>

<section id="hateoas">
<h2>HATEOAS Links</h2>
<p>Clients discover available actions dynamically through links in API responses.</p>

<h3>Example Response</h3>
<pre><code class="language-json">{
  "status": "ACTIVE",
  "token": "abc123",
  "links": [
    { "rel": "self", "href": "/v4/users/123", "method": "GET" },
    { "rel": "update", "href": "/v4/users/123", "method": "PUT" },
    { "rel": "delete", "href": "/v4/users/123", "method": "DELETE" }
  ]
}</code></pre>
</section>

<section id="hateoas-diagrams">
<h2>HATEOAS Endpoint Flows</h2>

<h3>GET /v4/users/123 (self)</h3>
<!-- Embed self SVG -->
<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="150" viewBox="0 0 800 150">
<g>
<rect x="50" y="20" width="150" height="40" fill="#003366" stroke="#000"/><text x="125" y="45" fill="#fff" font-size="14" text-anchor="middle">Client</text>
<rect x="600" y="20" width="150" height="40" fill="#003366" stroke="#000"/><text x="675" y="45" fill="#fff" font-size="14" text-anchor="middle">API Server</text>
<line x1="200" y1="40" x2="600" y2="40" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>
<text x="400" y="30" font-size="12" text-anchor="middle">GET /v4/users/123 (self)</text>
</g>
<defs>
<marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto" markerUnits="strokeWidth">
<path d="M0,0 L0,10 L10,5 z" fill="#000"/>
</marker>
</defs>
</svg>

<h3>PUT /v4/users/123 (update)</h3>
<!-- Embed update SVG -->
<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="180" viewBox="0 0 800 180">
<g>
<rect x="50" y="20" width="150" height="40" fill="#003366" stroke="#000"/><text x="125" y="45" fill="#fff" font-size="14" text-anchor="middle">Client</text>
<rect x="600" y="20" width="150" height="40" fill="#003366" stroke="#000"/><text x="675" y="45" fill="#fff" font-size="14" text-anchor="middle">API Server</text>
<line x1="200" y1="40" x2="600" y2="40" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>
<text x="400" y="30" font-size="12" text-anchor="middle">PUT /v4/users/123 (update)</text>
<line x1="600" y1="60" x2="200" y2="60" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>
<text x="400" y="75" font-size="12" text-anchor="middle">Response: Updated resource</text>
</g>
<defs>
<marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto" markerUnits="strokeWidth">
<path d="M0,0 L0,10 L10,5 z" fill="#000"/>
</marker>
</defs>
</svg>

<h3>DELETE /v4/users/123 (delete)</h3>
<!-- Embed delete SVG -->
<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="180" viewBox="0 0 800 180">
<g>
<rect x="50" y="20" width="150" height="40" fill="#003366" stroke="#000"/><text x="125" y="45" fill="#fff" font-size="14" text-anchor="middle">Client</text>
<rect x="600" y="20" width="150" height="40" fill="#003366" stroke="#000"/><text x="675" y="45" fill="#fff" font-size="14" text-anchor="middle">API Server</text>
<line x1="200" y1="40" x2="600" y2="40" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>
<text x="400" y="30" font-size="12" text-anchor="middle">DELETE /v4/users/123 (delete)</text>
<line x1="600" y1="60" x2="200" y2="60" stroke="#000" stroke-width="2" marker-end="url(#arrow)"/>
<text x="400" y="75" font-size="12" text-anchor="middle">Response: Resource removed</text>
</g>
<defs>
<marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto" markerUnits="strokeWidth">
<path d="M0,0 L0,10 L10,5 z" fill="#000"/>
</marker>
</defs>
</svg>

</section>

<section id="try-hateoas">
<h2>Try HATEOAS Links</h2>

<div class="copy-container">
<button onclick="copyCode(this)">Copy</button>
<pre><code class="language-bash">curl -X GET "https://api.example.com/v4/users/123" \
-H "Authorization: Bearer &lt;JWT&gt;" \
-H "Content-Type: application/json"</code></pre>
</div>

<div class="copy-container">
<button onclick="copyCode(this)">Copy</button>
<pre><code class="language-bash">curl -X PUT "https://api.example.com/v4/users/123" \
-H "Authorization: Bearer &lt;JWT&gt;" \
-H "Content-Type: application/json" \
-d '{ "status": "ACTIVE" }'</code></pre>
</div>

<div class="copy-container">
<button onclick="copyCode(this)">Copy</button>
<pre><code class="language-bash">curl -X DELETE "https://api.example.com/v4/users/123" \
-H "Authorization: Bearer &lt;JWT&gt;" \
-H "Content-Type: application/json"</code></pre>
</div>

</section>

<script>
function copyCode(button){
  const code=button.nextElementSibling.querySelector('code').innerText;
  navigator.clipboard.writeText(code).then(()=>{
    button.innerText='Copied!';
    setTimeout(()=>button.innerText='Copy',2000);
  });
}
</script>

</body>
  </html>
